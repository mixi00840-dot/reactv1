"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[351],{40831:function(e,t,n){n.d(t,{w:function(){return d}});var r=n(57437),o=n(2265),s=n(71594),a=n(24525),i=n(33804),l=n(40279),c=n(12381);function d(e){var t,n;let{columns:d,data:u,pageInfo:m,onPageChange:p,onPageSizeChange:f,onSearch:h,meta:v}=e,[g,x]=o.useState([]),[b,y]=o.useState(""),j=(0,s.b7)({data:u,columns:d,state:{sorting:g},onSortingChange:x,getCoreRowModel:(0,a.sC)(),getSortedRowModel:(0,a.tj)(),manualSorting:!0,meta:v});return(0,r.jsxs)("div",{"data-cy":"data-table",className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.Z,{"data-cy":"search-input",placeholder:"Search...",value:b,onChange:e=>y(e.target.value),onKeyDown:e=>"Enter"===e.key&&(null==h?void 0:h(b)),className:"max-w-xs"}),(0,r.jsx)(c.Z,{"data-cy":"search-button",variant:"secondary",onClick:()=>null==h?void 0:h(b),children:"Search"})]}),(0,r.jsx)("div",{className:"rounded-md border",children:(0,r.jsxs)(i.iA,{children:[(0,r.jsx)(i.xD,{children:j.getHeaderGroups().map(e=>(0,r.jsx)(i.SC,{children:e.headers.map(e=>{var t;return(0,r.jsx)(i.ss,{className:"select-none",children:e.isPlaceholder?null:(0,r.jsxs)("div",{className:e.column.getCanSort()?"cursor-pointer select-none":"",onClick:e.column.getToggleSortingHandler(),children:[(0,s.ie)(e.column.columnDef.header,e.getContext()),null!==(t=({asc:" ▲",desc:" ▼"})[e.column.getIsSorted()])&&void 0!==t?t:null]})},e.id)})},e.id))}),(0,r.jsx)(i.RM,{children:(null===(t=j.getRowModel().rows)||void 0===t?void 0:t.length)?j.getRowModel().rows.map(e=>(0,r.jsx)(i.SC,{"data-cy":"table-row","data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,r.jsx)(i.pj,{children:(0,s.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,r.jsx)(i.SC,{children:(0,r.jsx)(i.pj,{colSpan:d.length,className:"h-24 text-center",children:"No results."})})})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:m?"Page ".concat(m.page," \xb7 ").concat(m.total," total"):null}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("select",{"data-cy":"page-size-select",className:"h-9 rounded-md border bg-transparent px-2",value:null!==(n=null==m?void 0:m.pageSize)&&void 0!==n?n:20,onChange:e=>null==f?void 0:f(parseInt(e.target.value)),children:[10,20,50,100].map(e=>(0,r.jsxs)("option",{value:e,children:[e," / page"]},e))}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(c.Z,{"data-cy":"prev-page-button",variant:"outline",onClick:()=>{var e;return null==p?void 0:p(Math.max(1,(null!==(e=null==m?void 0:m.page)&&void 0!==e?e:1)-1))},children:"Prev"}),(0,r.jsx)(c.Z,{"data-cy":"next-page-button",variant:"outline",onClick:()=>{var e;return null==p?void 0:p((null!==(e=null==m?void 0:m.page)&&void 0!==e?e:1)+1)},children:"Next"})]})]})]})]})}},12381:function(e,t,n){n.d(t,{z:function(){return l}});var r=n(57437),o=n(2265),s=n(93448);let a={default:"bg-primary text-primary-foreground hover:opacity-90",secondary:"bg-secondary text-secondary-foreground hover:opacity-90",destructive:"bg-destructive text-destructive-foreground hover:opacity-90",outline:"border bg-transparent hover:bg-muted",ghost:"bg-transparent hover:bg-muted"},i={sm:"h-8 px-3 text-sm",md:"h-9 px-4 text-sm",lg:"h-10 px-5",icon:"h-9 w-9 p-0"},l=o.forwardRef((e,t)=>{let{className:n,variant:o="default",size:l="md",...c}=e;return(0,r.jsx)("button",{ref:t,className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",a[o],i[l],n),...c})});l.displayName="Button",t.Z=l},40279:function(e,t,n){var r=n(57437),o=n(2265),s=n(93448);let a=o.forwardRef((e,t)=>{let{className:n,type:o="text",...a}=e;return(0,r.jsx)("input",{type:o,className:(0,s.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...a})});a.displayName="Input",t.Z=a},33804:function(e,t,n){n.d(t,{RM:function(){return i},SC:function(){return l},iA:function(){return s},pj:function(){return d},ss:function(){return c},xD:function(){return a}});var r=n(57437);n(2265);var o=n(93448);function s(e){let{className:t,...n}=e;return(0,r.jsx)("table",{className:(0,o.cn)("w-full caption-bottom text-sm",t),...n})}function a(e){let{className:t,...n}=e;return(0,r.jsx)("thead",{className:(0,o.cn)("[&_tr]:border-b",t),...n})}function i(e){let{className:t,...n}=e;return(0,r.jsx)("tbody",{className:(0,o.cn)("[&_tr:last-child]:border-0",t),...n})}function l(e){let{className:t,...n}=e;return(0,r.jsx)("tr",{className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...n})}function c(e){let{className:t,...n}=e;return(0,r.jsx)("th",{className:(0,o.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground",t),...n})}function d(e){let{className:t,...n}=e;return(0,r.jsx)("td",{className:(0,o.cn)("p-2 align-middle",t),...n})}},23340:function(e,t,n){n.d(t,{Am:function(){return u},pm:function(){return m}});var r=n(2265);let o=0,s=new Map,a=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),d({type:"REMOVE_TOAST",toastId:e})},5e3);s.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,5)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:n}=t;return n?a(n):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=i(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,n=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:n});return d({type:"ADD_TOAST",toast:{...t,id:n,open:!0,onOpenChange:e=>{e||r()}}}),{id:n,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:n}})}}function m(){let[e,t]=r.useState(c);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},71837:function(e,t,n){var r=n(83464),o=n(64131),s=n(23340);let a="http://localhost:5000",i=r.Z.create({baseURL:"".concat(a,"/api"),timeout:3e4,headers:{"Content-Type":"application/json"},withCredentials:!0});i.interceptors.request.use(e=>{let t=o.Z.get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>(console.error("❌ Request Error:",e),Promise.reject(e))),i.interceptors.response.use(e=>e,async e=>{var t,n,l,c,d,u;let m=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!m._retry){m._retry=!0;try{let e=o.Z.get("refreshToken");if(e){let{token:t}=(await r.Z.post("".concat(a,"/api/auth/refresh"),{refreshToken:e})).data.data;return o.Z.set("token",t),m.headers&&(m.headers.Authorization="Bearer ".concat(t)),i(m)}}catch(e){return o.Z.remove("token"),o.Z.remove("refreshToken"),o.Z.remove("user"),(0,s.Am)({variant:"destructive",title:"Session Expired",description:"Please login again."}),window.location.href="/login",Promise.reject(e)}}let p=(null===(l=e.response)||void 0===l?void 0:null===(n=l.data)||void 0===n?void 0:n.message)||(null===(d=e.response)||void 0===d?void 0:null===(c=d.data)||void 0===c?void 0:c.error)||e.message,f=null===(u=e.response)||void 0===u?void 0:u.status;return[401,404].includes(f||0)||(0,s.Am)({variant:"destructive",title:"Error ".concat(f||""),description:p}),Promise.reject(e)}),t.Z=i},93448:function(e,t,n){n.d(t,{cn:function(){return s},p:function(){return a}});var r=n(61994),o=n(53335);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.m6)((0,r.W)(t))}function a(e){if(!e)return"";let t=new Date(e);return new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(t)}}}]);