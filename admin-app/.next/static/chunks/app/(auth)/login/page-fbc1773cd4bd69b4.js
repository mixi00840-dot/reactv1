(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{95679:function(e,o,n){Promise.resolve().then(n.bind(n,34995))},99376:function(e,o,n){"use strict";var l=n(35475);n.o(l,"useRouter")&&n.d(o,{useRouter:function(){return l.useRouter}})},34995:function(e,o,n){"use strict";n.r(o),n.d(o,{default:function(){return r}});var l=n(57437),s=n(2265),a=n(83464),t=n(64131),i=n(99376);function r(){let e=(0,i.useRouter)(),[o,n]=(0,s.useState)("admin@mixillo.com"),[r,d]=(0,s.useState)("Admin@123456"),[u,c]=(0,s.useState)(!1),[v,m]=(0,s.useState)(null),p=async n=>{var l,s,i,d,u,v,p,g,h,f;n.preventDefault(),m(null),c(!0);try{let n="".concat("http://localhost:5000","/api/auth/login");console.log("Attempting login to:",n),console.log("Request body:",{identifier:o,password:"***"});let c=await a.Z.post(n,{identifier:o,password:r});console.log("Login response:",c.data);let v=(null===(s=c.data)||void 0===s?void 0:null===(l=s.data)||void 0===l?void 0:l.token)||(null===(i=c.data)||void 0===i?void 0:i.token)||(null===(d=c.data)||void 0===d?void 0:d.accessToken)||(null===(u=c.data)||void 0===u?void 0:u.access_token);if(!v)throw Error("Invalid response - no token found");t.Z.set("token",v,{expires:7}),e.push("/dashboard")}catch(e){console.error("Login error:",e),console.error("Error response:",null==e?void 0:null===(v=e.response)||void 0===v?void 0:v.data),m((null==e?void 0:null===(g=e.response)||void 0===g?void 0:null===(p=g.data)||void 0===p?void 0:p.message)||(null==e?void 0:null===(f=e.response)||void 0===f?void 0:null===(h=f.data)||void 0===h?void 0:h.error)||(null==e?void 0:e.message)||"Login failed")}finally{c(!1)}};return(0,l.jsx)("main",{className:"container min-h-screen grid place-items-center",children:(0,l.jsxs)("form",{onSubmit:p,className:"w-full max-w-sm space-y-4 p-6 rounded border",children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold",children:"Admin Login"}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"block text-sm",children:"Email"}),(0,l.jsx)("input",{"data-cy":"login-email",className:"w-full border rounded p-2",value:o,onChange:e=>n(e.target.value),type:"email",required:!0})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"block text-sm",children:"Password"}),(0,l.jsx)("input",{"data-cy":"login-password",className:"w-full border rounded p-2",value:r,onChange:e=>d(e.target.value),type:"password",required:!0})]}),v&&(0,l.jsx)("p",{"data-cy":"login-error",className:"text-red-600 text-sm",children:v}),(0,l.jsx)("button",{"data-cy":"login-submit",disabled:u,className:"w-full bg-black text-white rounded p-2",children:u?"Logging inâ€¦":"Login"})]})})}}},function(e){e.O(0,[825,971,117,744],function(){return e(e.s=95679)}),_N_E=e.O()}]);