(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[824],{40020:function(e,t,s){Promise.resolve().then(s.bind(s,94048))},94048:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});var r=s(57437),n=s(2265),i=s(71837),o=s(79820);function a(){var e,t,s,a,d,c,l;let[u,m]=(0,n.useState)({}),[v,h]=(0,n.useState)(!0);async function p(){try{let[e,t]=await Promise.all([i.Z.get("/api/admin/database/stats"),i.Z.get("/api/admin/stream-providers")]);m({mongodb:e.data.mongodb,redis:e.data.redis,providers:t.data.providers,activeProvider:t.data.activeProvider})}catch(e){console.error("Failed to load system metrics:",e)}finally{h(!1)}}return((0,n.useEffect)(()=>{p()},[]),v)?(0,r.jsx)("div",{children:"Loading system info..."}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold",children:"System Settings"}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)(o.Zb,{className:"p-4",children:[(0,r.jsx)("h3",{className:"mb-2 font-medium",children:"MongoDB"}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("div",{children:["Status: ",(0,r.jsx)("span",{className:(null===(e=u.mongodb)||void 0===e?void 0:e.connected)?"text-green-600":"text-red-600",children:(null===(t=u.mongodb)||void 0===t?void 0:t.connected)?"Connected":"Disconnected"})]}),(0,r.jsxs)("div",{children:["Collections: ",(null===(s=u.mongodb)||void 0===s?void 0:s.collections)||0]})]})]}),(0,r.jsxs)(o.Zb,{className:"p-4",children:[(0,r.jsx)("h3",{className:"mb-2 font-medium",children:"Redis"}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("div",{children:["Status: ",(0,r.jsx)("span",{className:(null===(a=u.redis)||void 0===a?void 0:a.connected)?"text-green-600":"text-red-600",children:(null===(d=u.redis)||void 0===d?void 0:d.connected)?"Connected":"Disconnected"})]}),(0,r.jsxs)("div",{children:["Memory: ",(null===(c=u.redis)||void 0===c?void 0:c.usedMemory)||"N/A"]})]})]})]}),(0,r.jsxs)(o.Zb,{className:"p-4",children:[(0,r.jsx)("h3",{className:"mb-3 font-medium",children:"Streaming Providers"}),(0,r.jsxs)("p",{className:"mb-3 text-sm text-muted-foreground",children:["Active: ",u.activeProvider]}),(0,r.jsx)("div",{className:"space-y-2",children:null===(l=u.providers)||void 0===l?void 0:l.map(e=>{var t;return(0,r.jsxs)("div",{className:"rounded border p-3",children:[(0,r.jsxs)("div",{className:"mb-1 flex items-center justify-between",children:[(0,r.jsx)("span",{className:"font-medium",children:e.name}),(0,r.jsx)("span",{className:"rounded px-2 py-0.5 text-xs ".concat("configured"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Features: ",null===(t=e.features)||void 0===t?void 0:t.join(", ")]})]},e.id)})})]})]})}},79820:function(e,t,s){"use strict";s.d(t,{Zb:function(){return i}});var r=s(57437);s(2265);var n=s(93448);function i(e){let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})}},23340:function(e,t,s){"use strict";s.d(t,{Am:function(){return u},pm:function(){return m}});var r=s(2265);let n=0,i=new Map,o=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),l({type:"REMOVE_TOAST",toastId:e})},5e3);i.set(e,t)},a=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,5)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?o(s):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],c={toasts:[]};function l(e){c=a(c,e),d.forEach(e=>{e(c)})}function u(e){let{...t}=e,s=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>l({type:"DISMISS_TOAST",toastId:s});return l({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(c);return r.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},71837:function(e,t,s){"use strict";var r=s(83464),n=s(64131),i=s(23340);let o="http://localhost:5000",a=r.Z.create({baseURL:"".concat(o,"/api"),timeout:3e4,headers:{"Content-Type":"application/json"},withCredentials:!0});a.interceptors.request.use(e=>{let t=n.Z.get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>(console.error("âŒ Request Error:",e),Promise.reject(e))),a.interceptors.response.use(e=>e,async e=>{var t,s,d,c,l,u;let m=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!m._retry){m._retry=!0;try{let e=n.Z.get("refreshToken");if(e){let{token:t}=(await r.Z.post("".concat(o,"/api/auth/refresh"),{refreshToken:e})).data.data;return n.Z.set("token",t),m.headers&&(m.headers.Authorization="Bearer ".concat(t)),a(m)}}catch(e){return n.Z.remove("token"),n.Z.remove("refreshToken"),n.Z.remove("user"),(0,i.Am)({variant:"destructive",title:"Session Expired",description:"Please login again."}),window.location.href="/login",Promise.reject(e)}}let v=(null===(d=e.response)||void 0===d?void 0:null===(s=d.data)||void 0===s?void 0:s.message)||(null===(l=e.response)||void 0===l?void 0:null===(c=l.data)||void 0===c?void 0:c.error)||e.message,h=null===(u=e.response)||void 0===u?void 0:u.status;return[401,404].includes(h||0)||(0,i.Am)({variant:"destructive",title:"Error ".concat(h||""),description:v}),Promise.reject(e)}),t.Z=a},93448:function(e,t,s){"use strict";s.d(t,{cn:function(){return i},p:function(){return o}});var r=s(61994),n=s(53335);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,r.W)(t))}function o(e){if(!e)return"";let t=new Date(e);return new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(t)}}},function(e){e.O(0,[137,825,971,117,744],function(){return e(e.s=40020)}),_N_E=e.O()}]);