(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[900],{93202:function(e,t,s){Promise.resolve().then(s.bind(s,57625))},57625:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});var n=s(57437),i=s(2265),r=s(71837),o=s(79820);function a(){var e,t,s,a,d,l,c,u,m,v,h,f,x;let[p,g]=(0,i.useState)({}),[j,S]=(0,i.useState)(!0);async function y(){try{let e=await r.Z.get("/api/admin/analytics");g(e.data.analytics||{})}catch(e){console.error("Failed to load analytics:",e)}finally{S(!1)}}if((0,i.useEffect)(()=>{y()},[]),j)return(0,n.jsx)("div",{children:"Loading analytics..."});let N=null===(e=p.contentStats)||void 0===e?void 0:e.reduce((e,t)=>(e[t._id]=t.count,e),{}),T=null===(t=p.salesStats)||void 0===t?void 0:t.reduce((e,t)=>(e[t._id]={count:t.count,revenue:t.totalRevenue||0},e),{});return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold",children:"Analytics Dashboard"}),(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,n.jsxs)(o.Zb,{className:"p-4",children:[(0,n.jsx)("h3",{className:"mb-2 text-sm font-medium text-muted-foreground",children:"User Growth (30 days)"}),(0,n.jsx)("p",{className:"text-2xl font-bold",children:(null===(s=p.usersGrowth)||void 0===s?void 0:s.reduce((e,t)=>e+(t.count||0),0))||0}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"New users"})]}),(0,n.jsxs)(o.Zb,{className:"p-4",children:[(0,n.jsx)("h3",{className:"mb-2 text-sm font-medium text-muted-foreground",children:"Content Stats"}),(0,n.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,n.jsxs)("div",{children:["Active: ",(null==N?void 0:N.active)||0]}),(0,n.jsxs)("div",{children:["Reported: ",(null==N?void 0:N.reported)||0]}),(0,n.jsxs)("div",{children:["Inactive: ",(null==N?void 0:N.inactive)||0]})]})]}),(0,n.jsxs)(o.Zb,{className:"p-4",children:[(0,n.jsx)("h3",{className:"mb-2 text-sm font-medium text-muted-foreground",children:"Sales (30 days)"}),(0,n.jsxs)("p",{className:"text-2xl font-bold",children:["$",(null==T?void 0:null===(d=T.completed)||void 0===d?void 0:null===(a=d.revenue)||void 0===a?void 0:a.toFixed(2))||"0.00"]}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(null==T?void 0:null===(l=T.completed)||void 0===l?void 0:l.count)||0," orders"]})]}),(0,n.jsxs)(o.Zb,{className:"p-4",children:[(0,n.jsx)("h3",{className:"mb-2 text-sm font-medium text-muted-foreground",children:"Avg Engagement"}),(0,n.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,n.jsxs)("div",{children:["Views: ",(null===(u=p.engagementStats)||void 0===u?void 0:null===(c=u.avgViews)||void 0===c?void 0:c.toFixed(1))||0]}),(0,n.jsxs)("div",{children:["Likes: ",(null===(v=p.engagementStats)||void 0===v?void 0:null===(m=v.avgLikes)||void 0===m?void 0:m.toFixed(1))||0]}),(0,n.jsxs)("div",{children:["Comments: ",(null===(f=p.engagementStats)||void 0===f?void 0:null===(h=f.avgComments)||void 0===h?void 0:h.toFixed(1))||0]})]})]})]}),(0,n.jsxs)(o.Zb,{className:"p-4",children:[(0,n.jsx)("h3",{className:"mb-3 font-medium",children:"User Growth Chart"}),(0,n.jsx)("div",{className:"space-y-1 text-sm",children:null===(x=p.usersGrowth)||void 0===x?void 0:x.slice(-10).map((e,t)=>{var s,i,r;return(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("span",{children:[null===(s=e._id)||void 0===s?void 0:s.year,"-",String(null===(i=e._id)||void 0===i?void 0:i.month).padStart(2,"0"),"-",String(null===(r=e._id)||void 0===r?void 0:r.day).padStart(2,"0")]}),(0,n.jsx)("span",{className:"font-medium",children:e.count})]},t)})})]})]})}},79820:function(e,t,s){"use strict";s.d(t,{Zb:function(){return r}});var n=s(57437);s(2265);var i=s(93448);function r(e){let{className:t,...s}=e;return(0,n.jsx)("div",{className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})}},23340:function(e,t,s){"use strict";s.d(t,{Am:function(){return u},pm:function(){return m}});var n=s(2265);let i=0,r=new Map,o=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),c({type:"REMOVE_TOAST",toastId:e})},5e3);r.set(e,t)},a=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,5)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?o(s):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],l={toasts:[]};function c(e){l=a(l,e),d.forEach(e=>{e(l)})}function u(e){let{...t}=e,s=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||n()}}}),{id:s,dismiss:n,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=n.useState(l);return n.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},71837:function(e,t,s){"use strict";var n=s(83464),i=s(64131),r=s(23340);let o="http://localhost:5000",a=n.Z.create({baseURL:"".concat(o,"/api"),timeout:3e4,headers:{"Content-Type":"application/json"},withCredentials:!0});a.interceptors.request.use(e=>{let t=i.Z.get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>(console.error("âŒ Request Error:",e),Promise.reject(e))),a.interceptors.response.use(e=>e,async e=>{var t,s,d,l,c,u;let m=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!m._retry){m._retry=!0;try{let e=i.Z.get("refreshToken");if(e){let{token:t}=(await n.Z.post("".concat(o,"/api/auth/refresh"),{refreshToken:e})).data.data;return i.Z.set("token",t),m.headers&&(m.headers.Authorization="Bearer ".concat(t)),a(m)}}catch(e){return i.Z.remove("token"),i.Z.remove("refreshToken"),i.Z.remove("user"),(0,r.Am)({variant:"destructive",title:"Session Expired",description:"Please login again."}),window.location.href="/login",Promise.reject(e)}}let v=(null===(d=e.response)||void 0===d?void 0:null===(s=d.data)||void 0===s?void 0:s.message)||(null===(c=e.response)||void 0===c?void 0:null===(l=c.data)||void 0===l?void 0:l.error)||e.message,h=null===(u=e.response)||void 0===u?void 0:u.status;return[401,404].includes(h||0)||(0,r.Am)({variant:"destructive",title:"Error ".concat(h||""),description:v}),Promise.reject(e)}),t.Z=a},93448:function(e,t,s){"use strict";s.d(t,{cn:function(){return r},p:function(){return o}});var n=s(61994),i=s(53335);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.m6)((0,n.W)(t))}function o(e){if(!e)return"";let t=new Date(e);return new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(t)}}},function(e){e.O(0,[137,825,971,117,744],function(){return e(e.s=93202)}),_N_E=e.O()}]);