(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{89879:function(e,s,l){Promise.resolve().then(l.bind(l,4913))},99388:function(e,s,l){"use strict";l.d(s,{Z:function(){return a}});let a=(0,l(79205).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},44794:function(e,s,l){"use strict";l.d(s,{Z:function(){return a}});let a=(0,l(79205).Z)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},4913:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return O}});var a=l(57437),n=l(2265),t=l(69174),i=l(96246),r=l(32060),d=l(12381),c=l(67782),o=l(42208),u=l(41671),x=l(44794),h=l(79205);let m=(0,h.Z)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);var j=l(99388);let p={pending:"outline",confirmed:"default",processing:"default",shipped:"default",delivered:"default",cancelled:"destructive",refunded:"secondary"},v={pending:"outline",paid:"default",failed:"destructive",refunded:"secondary"},f=e=>[{accessorKey:"orderNumber",header:"Order #",cell:e=>{let{row:s}=e;return(0,a.jsx)("span",{className:"font-mono text-sm",children:s.original.orderNumber||s.original._id.slice(-8).toUpperCase()})}},{accessorKey:"customer",header:"Customer",cell:e=>{var s;let{row:l}=e,n=l.original.customer;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(i.qE,{className:"h-6 w-6",children:[(0,a.jsx)(i.F$,{src:null==n?void 0:n.avatar,alt:null==n?void 0:n.username}),(0,a.jsx)(i.Q5,{className:"text-xs",children:null==n?void 0:null===(s=n.username)||void 0===s?void 0:s.charAt(0).toUpperCase()})]}),(0,a.jsx)("span",{className:"text-sm",children:(null==n?void 0:n.username)||"Unknown"})]})}},{accessorKey:"items",header:"Items",cell:e=>{var s;let{row:l}=e,n=(null===(s=l.original.items)||void 0===s?void 0:s.length)||0;return(0,a.jsxs)("span",{className:"text-sm",children:[n," item",1!==n?"s":""]})}},{accessorKey:"total",header:"Total",cell:e=>{let{row:s}=e;return(0,a.jsxs)("span",{className:"font-medium",children:["$",s.original.total.toFixed(2)]})}},{accessorKey:"paymentStatus",header:"Payment",cell:e=>{let{row:s}=e,l=s.original.paymentStatus;return(0,a.jsx)(t.C,{variant:v[l]||"default",className:"capitalize",children:l})}},{accessorKey:"status",header:"Order Status",cell:e=>{let{row:s}=e,l=s.original.status;return(0,a.jsx)(t.C,{variant:p[l]||"default",className:"capitalize",children:l})}},{accessorKey:"createdAt",header:"Date",cell:e=>{let{row:s}=e;return(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:new Date(s.original.createdAt).toLocaleDateString()})}},{id:"actions",header:"Actions",cell:s=>{let{row:l}=s,n=l.original;return(0,a.jsxs)(r.h_,{children:[(0,a.jsx)(r.$F,{asChild:!0,children:(0,a.jsxs)(d.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,a.jsx)(c.Z,{className:"h-4 w-4"})]})}),(0,a.jsxs)(r.AW,{align:"end",children:[(0,a.jsx)(r.Ju,{children:"Actions"}),(0,a.jsxs)(r.Xi,{onClick:()=>e.onView(n),children:[(0,a.jsx)(o.Z,{className:"mr-2 h-4 w-4"}),"View Details"]}),(0,a.jsx)(r.VD,{}),"pending"===n.status&&(0,a.jsxs)(r.Xi,{onClick:()=>e.onUpdateStatus(n,"confirmed"),className:"text-green-600",children:[(0,a.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Confirm Order"]}),"confirmed"===n.status&&(0,a.jsxs)(r.Xi,{onClick:()=>e.onUpdateStatus(n,"processing"),children:[(0,a.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"Start Processing"]}),"processing"===n.status&&(0,a.jsxs)(r.Xi,{onClick:()=>e.onUpdateStatus(n,"shipped"),children:[(0,a.jsx)(m,{className:"mr-2 h-4 w-4"}),"Mark as Shipped"]}),"shipped"===n.status&&(0,a.jsxs)(r.Xi,{onClick:()=>e.onUpdateStatus(n,"delivered"),className:"text-green-600",children:[(0,a.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Mark as Delivered"]}),("pending"===n.status||"confirmed"===n.status)&&(0,a.jsxs)(r.Xi,{onClick:()=>e.onCancel(n),className:"text-red-600",children:[(0,a.jsx)(j.Z,{className:"mr-2 h-4 w-4"}),"Cancel Order"]}),"delivered"===n.status&&"paid"===n.paymentStatus&&(0,a.jsxs)(r.Xi,{onClick:()=>e.onRefund(n),className:"text-orange-600",children:[(0,a.jsx)(j.Z,{className:"mr-2 h-4 w-4"}),"Process Refund"]})]})]})}}];var N=l(40282),g=l(79820);let y=(0,h.Z)("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]]),k=(0,h.Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var w=l(75248),b=l(74291),C=l(75060),S=l(15291),P=l(23340),Z=l(17168);function O(){var e,s,l,t,i;let[r,c]=(0,n.useState)(1),[o,x]=(0,n.useState)({}),[h,j]=(0,n.useState)(null),[p,v]=(0,n.useState)(!1),[O,A]=(0,n.useState)(!1),[_,z]=(0,n.useState)(!1),{toast:Q}=(0,P.pm)(),{data:U,isLoading:V,refetch:M}=(0,N.yi)(r,20,o),F=(null==U?void 0:null===(e=U.pagination)||void 0===e?void 0:e.total)||0,K=(null==U?void 0:null===(s=U.orders)||void 0===s?void 0:s.filter(e=>"pending"===e.status).length)||0,D=(null==U?void 0:null===(l=U.orders)||void 0===l?void 0:l.filter(e=>"processing"===e.status||"confirmed"===e.status).length)||0,$=(null==U?void 0:null===(t=U.orders)||void 0===t?void 0:t.filter(e=>"delivered"===e.status).length)||0,q=async()=>{if(h)try{Q({title:"Order Cancelled",description:"The order has been cancelled."}),A(!1),j(null),M()}catch(e){Q({title:"Error",description:"Failed to cancel order.",variant:"destructive"})}},T=async()=>{if(h)try{Q({title:"Refund Processed",description:"The refund has been processed successfully."}),z(!1),j(null),M()}catch(e){Q({title:"Error",description:"Failed to process refund.",variant:"destructive"})}},E=f({onView:e=>{j(e),v(!0)},onUpdateStatus:async(e,s)=>{try{Q({title:"Status Updated",description:"Order status updated to ".concat(s,".")}),M()}catch(e){Q({title:"Error",description:"Failed to update order status.",variant:"destructive"})}},onCancel:e=>{j(e),A(!0)},onRefund:e=>{j(e),z(!0)}});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Orders Management"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Track and manage customer orders"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.z,{variant:"outline",onClick:()=>M(),children:"Refresh"}),(0,a.jsx)(d.z,{children:"Export Orders"})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,a.jsx)(g.Zb,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:F})]}),(0,a.jsx)(y,{className:"h-8 w-8 text-muted-foreground"})]})}),(0,a.jsx)(g.Zb,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:K})]}),(0,a.jsx)(k,{className:"h-8 w-8 text-orange-600"})]})}),(0,a.jsx)(g.Zb,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Processing"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:D})]}),(0,a.jsx)(m,{className:"h-8 w-8 text-blue-600"})]})}),(0,a.jsx)(g.Zb,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Completed"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:$})]}),(0,a.jsx)(u.Z,{className:"h-8 w-8 text-green-600"})]})})]}),(0,a.jsx)(g.Zb,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(S.Ph,{value:o.status||"all",onValueChange:e=>x({...o,status:"all"===e?void 0:e}),children:[(0,a.jsx)(S.i4,{className:"w-[180px]",children:(0,a.jsx)(S.ki,{placeholder:"Filter by status"})}),(0,a.jsxs)(S.Bw,{children:[(0,a.jsx)(S.Ql,{value:"all",children:"All Status"}),(0,a.jsx)(S.Ql,{value:"pending",children:"Pending"}),(0,a.jsx)(S.Ql,{value:"confirmed",children:"Confirmed"}),(0,a.jsx)(S.Ql,{value:"processing",children:"Processing"}),(0,a.jsx)(S.Ql,{value:"shipped",children:"Shipped"}),(0,a.jsx)(S.Ql,{value:"delivered",children:"Delivered"}),(0,a.jsx)(S.Ql,{value:"cancelled",children:"Cancelled"})]})]}),(0,a.jsxs)(S.Ph,{value:o.paymentStatus||"all",onValueChange:e=>x({...o,paymentStatus:"all"===e?void 0:e}),children:[(0,a.jsx)(S.i4,{className:"w-[180px]",children:(0,a.jsx)(S.ki,{placeholder:"Payment status"})}),(0,a.jsxs)(S.Bw,{children:[(0,a.jsx)(S.Ql,{value:"all",children:"All Payments"}),(0,a.jsx)(S.Ql,{value:"pending",children:"Pending"}),(0,a.jsx)(S.Ql,{value:"paid",children:"Paid"}),(0,a.jsx)(S.Ql,{value:"failed",children:"Failed"}),(0,a.jsx)(S.Ql,{value:"refunded",children:"Refunded"})]})]})]})}),(0,a.jsx)(g.Zb,{className:"p-6",children:(0,a.jsx)(w.w,{columns:E,data:(null==U?void 0:U.orders)||[],searchKey:"orderNumber"})}),(0,a.jsx)(b.Vq,{open:p,onOpenChange:v,children:(0,a.jsxs)(b.cZ,{className:"max-w-3xl",children:[(0,a.jsx)(b.fK,{children:(0,a.jsx)(b.$N,{children:"Order Details"})}),(0,a.jsxs)(Z.mQ,{defaultValue:"info",className:"w-full",children:[(0,a.jsxs)(Z.dr,{children:[(0,a.jsx)(Z.SP,{value:"info",children:"Information"}),(0,a.jsx)(Z.SP,{value:"items",children:"Items"}),(0,a.jsx)(Z.SP,{value:"shipping",children:"Shipping"}),(0,a.jsx)(Z.SP,{value:"payment",children:"Payment"})]}),(0,a.jsx)(Z.nU,{value:"info",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{children:"Order Number"}),(0,a.jsx)("p",{className:"font-mono text-sm",children:(null==h?void 0:h.orderNumber)||(null==h?void 0:h._id.slice(-8).toUpperCase())})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{children:"Customer"}),(0,a.jsx)("p",{className:"text-sm",children:(null==h?void 0:null===(i=h.customer)||void 0===i?void 0:i.username)||"Unknown"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{children:"Order Status"}),(0,a.jsx)("p",{className:"text-sm capitalize",children:null==h?void 0:h.status})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{children:"Order Date"}),(0,a.jsx)("p",{className:"text-sm",children:(null==h?void 0:h.createdAt)?new Date(h.createdAt).toLocaleString():"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{children:"Total Amount"}),(0,a.jsxs)("p",{className:"text-lg font-bold",children:["$",null==h?void 0:h.total.toFixed(2)]})]})]})]})}),(0,a.jsx)(Z.nU,{value:"items",className:"space-y-4",children:(0,a.jsx)("div",{className:"space-y-2",children:(null==h?void 0:h.items)&&h.items.length>0?h.items.map((e,s)=>{var l;return(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:(null===(l=e.product)||void 0===l?void 0:l.name)||"Product"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",e.quantity]})]}),(0,a.jsxs)("p",{className:"font-medium",children:["$",e.price.toFixed(2)]})]},s)}):(0,a.jsx)("div",{className:"flex h-20 items-center justify-center rounded-lg border border-dashed",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No items"})})})}),(0,a.jsx)(Z.nU,{value:"shipping",className:"space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{children:"Shipping Address"}),(0,a.jsx)("p",{className:"text-sm",children:(null==h?void 0:h.shippingAddress)||"No address provided"})]})}),(0,a.jsx)(Z.nU,{value:"payment",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{children:"Payment Status"}),(0,a.jsx)("p",{className:"text-sm capitalize font-medium",children:null==h?void 0:h.paymentStatus})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{children:"Payment Method"}),(0,a.jsx)("p",{className:"text-sm capitalize",children:(null==h?void 0:h.paymentMethod)||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{children:"Total Amount"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["$",null==h?void 0:h.total.toFixed(2)]})]})]})})]})]})}),(0,a.jsx)(b.Vq,{open:O,onOpenChange:A,children:(0,a.jsxs)(b.cZ,{children:[(0,a.jsxs)(b.fK,{children:[(0,a.jsx)(b.$N,{children:"Cancel Order"}),(0,a.jsx)(b.Be,{children:"Are you sure you want to cancel this order? This action cannot be undone."})]}),(0,a.jsxs)(b.cN,{children:[(0,a.jsx)(d.z,{variant:"outline",onClick:()=>A(!1),children:"No, Keep Order"}),(0,a.jsx)(d.z,{variant:"destructive",onClick:q,children:"Yes, Cancel Order"})]})]})}),(0,a.jsx)(b.Vq,{open:_,onOpenChange:z,children:(0,a.jsxs)(b.cZ,{children:[(0,a.jsxs)(b.fK,{children:[(0,a.jsx)(b.$N,{children:"Process Refund"}),(0,a.jsxs)(b.Be,{children:["Process a refund for this order. The customer will be refunded the full amount of $",null==h?void 0:h.total.toFixed(2),"."]})]}),(0,a.jsxs)(b.cN,{children:[(0,a.jsx)(d.z,{variant:"outline",onClick:()=>z(!1),children:"Cancel"}),(0,a.jsx)(d.z,{onClick:T,children:"Process Refund"})]})]})})]})}}},function(e){e.O(0,[137,237,594,705,328,561,825,846,244,354,971,117,744],function(){return e(e.s=89879)}),_N_E=e.O()}]);