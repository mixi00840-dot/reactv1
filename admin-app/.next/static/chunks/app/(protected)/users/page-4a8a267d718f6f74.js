(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[119],{61428:function(e,s,l){Promise.resolve().then(l.bind(l,42799))},88906:function(e,s,l){"use strict";l.d(s,{Z:function(){return a}});let a=(0,l(79205).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},15868:function(e,s,l){"use strict";l.d(s,{Z:function(){return a}});let a=(0,l(79205).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},18930:function(e,s,l){"use strict";l.d(s,{Z:function(){return a}});let a=(0,l(79205).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},42799:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return P}});var a=l(57437),t=l(2265),r=l(40282),n=l(75248),i=l(79205);let c=(0,i.Z)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);var d=l(88906),o=l(67782),x=l(42208),u=l(15868),h=l(41671);let m=(0,i.Z)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var j=l(18930),v=l(12381),p=l(32060),f=l(69174),g=l(96246),N=l(79820),y=l(69140);let b=(0,i.Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),w=(0,i.Z)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),k=(0,i.Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var U=l(74291),C=l(75060),Z=l(23675),V=l(15291),S=l(23340),A=l(17168);function P(){var e;let[s,l]=(0,t.useState)(1),[i,P]=(0,t.useState)({}),[M,_]=(0,t.useState)(null),[E,z]=(0,t.useState)(!1),[D,B]=(0,t.useState)(!1),[K,Q]=(0,t.useState)(!1),[O,F]=(0,t.useState)(""),{toast:q}=(0,S.pm)(),{data:X,isLoading:$,refetch:H}=(0,r.UV)(s,20,i),R=(0,r.W4)(),T=(0,r.$Q)(),J=async()=>{if(!M||!O.trim()){q({variant:"destructive",title:"Error",description:"Please provide a reason for banning"});return}try{await R.mutateAsync({id:M._id,reason:O}),q({variant:"success",title:"User Banned",description:"".concat(M.username," has been banned")}),z(!1),F(""),H()}catch(e){q({variant:"destructive",title:"Error",description:"Failed to ban user"})}},L=async()=>{q({title:"User Deleted",description:"User has been deleted successfully"}),B(!1)},I=(e={onView:e=>{_(e),Q(!0)},onEdit:e=>{q({title:"Edit User",description:"Edit functionality will be implemented soon"})},onBan:e=>{_(e),z(!0)},onUnban:async e=>{try{await T.mutateAsync(e._id),q({variant:"success",title:"User Unbanned",description:"".concat(e.username," has been unbanned successfully")}),H()}catch(e){q({variant:"destructive",title:"Error",description:"Failed to unban user"})}},onDelete:e=>{_(e),B(!0)},onVerify:async e=>{q({title:"User Verified",description:"".concat(e.username," has been verified")})}},[{accessorKey:"username",header:e=>{let{column:s}=e;return(0,a.jsxs)(v.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["User",(0,a.jsx)(c,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:s}=e,l=s.original;return(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(g.qE,{className:"h-10 w-10",children:[(0,a.jsx)(g.F$,{src:l.avatar,alt:l.username}),(0,a.jsx)(g.Q5,{children:l.username.substring(0,2).toUpperCase()})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[l.username,l.verified&&(0,a.jsx)(d.Z,{className:"h-4 w-4 text-blue-500"})]}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:l.email})]})]})}},{accessorKey:"role",header:"Role",cell:e=>{let{row:s}=e,l=s.getValue("role");return(0,a.jsx)(f.C,{variant:"outline",className:{admin:"bg-purple-100 text-purple-800 border-purple-200",seller:"bg-blue-100 text-blue-800 border-blue-200",user:"bg-gray-100 text-gray-800 border-gray-200"}[l],children:l.toUpperCase()})}},{accessorKey:"status",header:"Status",cell:e=>{let{row:s}=e,l=s.getValue("status");return(0,a.jsx)(f.C,{variant:"outline",className:{active:"bg-green-100 text-green-800 border-green-200",suspended:"bg-yellow-100 text-yellow-800 border-yellow-200",banned:"bg-red-100 text-red-800 border-red-200"}[l],children:l})}},{accessorKey:"totalPosts",header:"Posts",cell:e=>{let{row:s}=e;return(0,a.jsx)("div",{className:"text-center",children:s.getValue("totalPosts")||0})}},{accessorKey:"totalProducts",header:"Products",cell:e=>{let{row:s}=e;return(0,a.jsx)("div",{className:"text-center",children:s.getValue("totalProducts")||0})}},{accessorKey:"followers",header:"Followers",cell:e=>{let{row:s}=e;return(0,a.jsx)("div",{className:"text-center",children:s.getValue("followers")||0})}},{accessorKey:"createdAt",header:e=>{let{column:s}=e;return(0,a.jsxs)(v.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Joined",(0,a.jsx)(c,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:s}=e;return new Date(s.getValue("createdAt")).toLocaleDateString()}},{id:"actions",cell:s=>{let{row:l}=s,t=l.original;return(0,a.jsxs)(p.h_,{children:[(0,a.jsx)(p.$F,{asChild:!0,children:(0,a.jsxs)(v.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,a.jsx)(o.Z,{className:"h-4 w-4"})]})}),(0,a.jsxs)(p.AW,{align:"end",children:[(0,a.jsx)(p.Ju,{children:"Actions"}),(0,a.jsxs)(p.Xi,{onClick:()=>e.onView(t),children:[(0,a.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"View Details"]}),(0,a.jsxs)(p.Xi,{onClick:()=>e.onEdit(t),children:[(0,a.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Edit User"]}),!t.verified&&(0,a.jsxs)(p.Xi,{onClick:()=>e.onVerify(t),children:[(0,a.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"Verify User"]}),(0,a.jsx)(p.VD,{}),"banned"===t.status?(0,a.jsxs)(p.Xi,{onClick:()=>e.onUnban(t),children:[(0,a.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"Unban User"]}):(0,a.jsxs)(p.Xi,{onClick:()=>e.onBan(t),children:[(0,a.jsx)(m,{className:"mr-2 h-4 w-4"}),"Ban User"]}),(0,a.jsxs)(p.Xi,{onClick:()=>e.onDelete(t),className:"text-red-600",children:[(0,a.jsx)(j.Z,{className:"mr-2 h-4 w-4"}),"Delete User"]})]})]})}}]);if($)return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(y.O,{className:"h-8 w-48"}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-4",children:[1,2,3,4].map(e=>(0,a.jsx)(y.O,{className:"h-24"},e))}),(0,a.jsx)(y.O,{className:"h-96"})]});let W=(null==X?void 0:X.users)||[],Y=(null==X?void 0:X.pagination)||{total:0,page:1,pages:1};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Users Management"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage all platform users, roles, and permissions"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(v.z,{variant:"outline",children:[(0,a.jsx)(b,{className:"mr-2 h-4 w-4"}),"Export"]}),(0,a.jsxs)(v.z,{children:[(0,a.jsx)(w,{className:"mr-2 h-4 w-4"}),"Add User"]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,a.jsxs)(N.Zb,{className:"p-6",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Total Users"}),(0,a.jsx)("div",{className:"text-2xl font-bold mt-2",children:Y.total})]}),(0,a.jsxs)(N.Zb,{className:"p-6",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Active"}),(0,a.jsx)("div",{className:"text-2xl font-bold mt-2 text-green-600",children:W.filter(e=>"active"===e.status).length})]}),(0,a.jsxs)(N.Zb,{className:"p-6",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Suspended"}),(0,a.jsx)("div",{className:"text-2xl font-bold mt-2 text-yellow-600",children:W.filter(e=>"suspended"===e.status).length})]}),(0,a.jsxs)(N.Zb,{className:"p-6",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Banned"}),(0,a.jsx)("div",{className:"text-2xl font-bold mt-2 text-red-600",children:W.filter(e=>"banned"===e.status).length})]})]}),(0,a.jsx)(N.Zb,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(k,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsxs)(V.Ph,{value:i.role||"all",onValueChange:e=>P({...i,role:"all"===e?void 0:e}),children:[(0,a.jsx)(V.i4,{className:"w-[180px]",children:(0,a.jsx)(V.ki,{placeholder:"Filter by role"})}),(0,a.jsxs)(V.Bw,{children:[(0,a.jsx)(V.Ql,{value:"all",children:"All Roles"}),(0,a.jsx)(V.Ql,{value:"user",children:"Users"}),(0,a.jsx)(V.Ql,{value:"seller",children:"Sellers"}),(0,a.jsx)(V.Ql,{value:"admin",children:"Admins"})]})]}),(0,a.jsxs)(V.Ph,{value:i.status||"all",onValueChange:e=>P({...i,status:"all"===e?void 0:e}),children:[(0,a.jsx)(V.i4,{className:"w-[180px]",children:(0,a.jsx)(V.ki,{placeholder:"Filter by status"})}),(0,a.jsxs)(V.Bw,{children:[(0,a.jsx)(V.Ql,{value:"all",children:"All Status"}),(0,a.jsx)(V.Ql,{value:"active",children:"Active"}),(0,a.jsx)(V.Ql,{value:"suspended",children:"Suspended"}),(0,a.jsx)(V.Ql,{value:"banned",children:"Banned"})]})]})]})}),(0,a.jsx)(N.Zb,{className:"p-6",children:(0,a.jsx)(n.w,{columns:I,data:W,searchKey:"username",searchPlaceholder:"Search users..."})}),(0,a.jsx)(U.Vq,{open:E,onOpenChange:z,children:(0,a.jsxs)(U.cZ,{children:[(0,a.jsxs)(U.fK,{children:[(0,a.jsx)(U.$N,{children:"Ban User"}),(0,a.jsxs)(U.Be,{children:["Are you sure you want to ban ",null==M?void 0:M.username,"? This action can be reversed."]})]}),(0,a.jsx)("div",{className:"space-y-4 py-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(C._,{htmlFor:"reason",children:"Reason for banning"}),(0,a.jsx)(Z.g,{id:"reason",placeholder:"Enter the reason for banning this user...",value:O,onChange:e=>F(e.target.value)})]})}),(0,a.jsxs)(U.cN,{children:[(0,a.jsx)(v.z,{variant:"outline",onClick:()=>z(!1),children:"Cancel"}),(0,a.jsx)(v.z,{variant:"destructive",onClick:J,children:"Ban User"})]})]})}),(0,a.jsx)(U.Vq,{open:D,onOpenChange:B,children:(0,a.jsxs)(U.cZ,{children:[(0,a.jsxs)(U.fK,{children:[(0,a.jsx)(U.$N,{children:"Delete User"}),(0,a.jsxs)(U.Be,{children:["Are you sure you want to delete ",null==M?void 0:M.username,"? This action cannot be undone."]})]}),(0,a.jsxs)(U.cN,{children:[(0,a.jsx)(v.z,{variant:"outline",onClick:()=>B(!1),children:"Cancel"}),(0,a.jsx)(v.z,{variant:"destructive",onClick:L,children:"Delete User"})]})]})}),(0,a.jsx)(U.Vq,{open:K,onOpenChange:Q,children:(0,a.jsxs)(U.cZ,{className:"max-w-3xl",children:[(0,a.jsx)(U.fK,{children:(0,a.jsx)(U.$N,{children:"User Details"})}),M&&(0,a.jsxs)(A.mQ,{defaultValue:"profile",className:"w-full",children:[(0,a.jsxs)(A.dr,{children:[(0,a.jsx)(A.SP,{value:"profile",children:"Profile"}),(0,a.jsx)(A.SP,{value:"activity",children:"Activity"}),(0,a.jsx)(A.SP,{value:"content",children:"Content"})]}),(0,a.jsx)(A.nU,{value:"profile",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{children:"Username"}),(0,a.jsx)("p",{className:"text-sm",children:M.username})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{children:"Email"}),(0,a.jsx)("p",{className:"text-sm",children:M.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{children:"Role"}),(0,a.jsx)("p",{className:"text-sm",children:M.role})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{children:"Status"}),(0,a.jsx)("p",{className:"text-sm",children:M.status})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{children:"Joined"}),(0,a.jsx)("p",{className:"text-sm",children:new Date(M.createdAt).toLocaleDateString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{children:"Verified"}),(0,a.jsx)("p",{className:"text-sm",children:M.verified?"Yes":"No"})]})]})}),(0,a.jsx)(A.nU,{value:"activity",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Activity log will be displayed here"})}),(0,a.jsx)(A.nU,{value:"content",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)(N.Zb,{className:"p-4",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Posts"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:M.totalPosts||0})]}),(0,a.jsxs)(N.Zb,{className:"p-4",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Products"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:M.totalProducts||0})]}),(0,a.jsxs)(N.Zb,{className:"p-4",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Followers"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:M.followers||0})]})]})})]})]})})]})}},69140:function(e,s,l){"use strict";l.d(s,{O:function(){return r}});var a=l(57437),t=l(93448);function r(e){let{className:s,...l}=e;return(0,a.jsx)("div",{className:(0,t.cn)("animate-pulse rounded-md bg-muted",s),...l})}},23675:function(e,s,l){"use strict";l.d(s,{g:function(){return n}});var a=l(57437),t=l(2265),r=l(93448);let n=t.forwardRef((e,s)=>{let{className:l,...t}=e;return(0,a.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l),ref:s,...t})});n.displayName="Textarea"}},function(e){e.O(0,[137,237,594,705,328,561,825,846,244,354,971,117,744],function(){return e(e.s=61428)}),_N_E=e.O()}]);