(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44],{82386:function(e,s,n){Promise.resolve().then(n.bind(n,4314))},4314:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return F}});var t=n(57437),l=n(2265),a=n(69174),i=n(96246),c=n(32060),r=n(12381),d=n(79205);let o=(0,d.Z)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]);var x=n(67782);let h=(0,d.Z)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);var j=n(42208),u=n(41671);let m=(0,d.Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var v=n(18930);let p={pending:"outline",active:"default",inactive:"secondary",flagged:"destructive",banned:"destructive",deleted:"secondary"},g=e=>[{accessorKey:"creator",header:"Creator",cell:e=>{var s;let{row:n}=e,l=n.original.creator;return(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(i.qE,{className:"h-8 w-8",children:[(0,t.jsx)(i.F$,{src:null==l?void 0:l.avatar,alt:null==l?void 0:l.username}),(0,t.jsx)(i.Q5,{children:null==l?void 0:null===(s=l.username)||void 0===s?void 0:s.charAt(0).toUpperCase()})]}),(0,t.jsx)("span",{className:"font-medium",children:(null==l?void 0:l.username)||"Unknown"})]})}},{accessorKey:"caption",header:"Caption",cell:e=>{let{row:s}=e,n=s.original.caption||"";return(0,t.jsx)("div",{className:"max-w-[300px]",children:(0,t.jsx)("p",{className:"truncate text-sm",children:n||(0,t.jsx)("span",{className:"text-muted-foreground",children:"No caption"})})})}},{accessorKey:"status",header:"Status",cell:e=>{let{row:s}=e,n=s.original.status;return(0,t.jsx)(a.C,{variant:p[n]||"default",className:"capitalize",children:n})}},{accessorKey:"views",header:"Views",cell:e=>{var s;let{row:n}=e;return(0,t.jsx)("span",{className:"text-sm",children:(null===(s=n.original.views)||void 0===s?void 0:s.toLocaleString())||0})}},{accessorKey:"likes",header:"Likes",cell:e=>{var s;let{row:n}=e;return(0,t.jsx)("span",{className:"text-sm",children:(null===(s=n.original.likes)||void 0===s?void 0:s.toLocaleString())||0})}},{accessorKey:"reports",header:"Reports",cell:e=>{let{row:s}=e,n=s.original.reports||0;return(0,t.jsx)("span",{className:"text-sm font-medium ".concat(n>0?"text-red-600":""),children:n>0?(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(o,{className:"h-3 w-3"}),n]}):0})}},{accessorKey:"createdAt",header:"Created",cell:e=>{let{row:s}=e;return(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:new Date(s.original.createdAt).toLocaleDateString()})}},{id:"actions",header:"Actions",cell:s=>{let{row:n}=s,l=n.original;return(0,t.jsxs)(c.h_,{children:[(0,t.jsx)(c.$F,{asChild:!0,children:(0,t.jsxs)(r.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,t.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,t.jsx)(x.Z,{className:"h-4 w-4"})]})}),(0,t.jsxs)(c.AW,{align:"end",children:[(0,t.jsx)(c.Ju,{children:"Actions"}),(0,t.jsxs)(c.Xi,{onClick:()=>e.onPreview(l),children:[(0,t.jsx)(h,{className:"mr-2 h-4 w-4"}),"Preview Video"]}),(0,t.jsxs)(c.Xi,{onClick:()=>e.onView(l),children:[(0,t.jsx)(j.Z,{className:"mr-2 h-4 w-4"}),"View Details"]}),(0,t.jsx)(c.VD,{}),"pending"===l.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.Xi,{onClick:()=>e.onApprove(l),className:"text-green-600",children:[(0,t.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Approve"]}),(0,t.jsxs)(c.Xi,{onClick:()=>e.onReject(l),className:"text-red-600",children:[(0,t.jsx)(m,{className:"mr-2 h-4 w-4"}),"Reject"]})]}),"active"===l.status&&(0,t.jsxs)(c.Xi,{onClick:()=>e.onFlag(l),className:"text-orange-600",children:[(0,t.jsx)(o,{className:"mr-2 h-4 w-4"}),"Flag Content"]}),("flagged"===l.status||"active"===l.status)&&(0,t.jsxs)(c.Xi,{onClick:()=>e.onBan(l),className:"text-red-600",children:[(0,t.jsx)(m,{className:"mr-2 h-4 w-4"}),"Ban Content"]}),(0,t.jsx)(c.VD,{}),(0,t.jsxs)(c.Xi,{onClick:()=>e.onDelete(l),className:"text-red-600",children:[(0,t.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})}}];var N=n(40282),f=n(79820);let y=(0,d.Z)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),w=(0,d.Z)("thumbs-up",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);var C=n(75248),b=n(74291),k=n(75060),S=n(23675),A=n(15291),Z=n(23340),_=n(17168);function F(){var e,s,n,a,i,c,d,x;let[h,u]=(0,l.useState)(1),[m,v]=(0,l.useState)({}),[p,F]=(0,l.useState)(null),[V,R]=(0,l.useState)(""),[z,K]=(0,l.useState)(""),[B,D]=(0,l.useState)(""),[P,q]=(0,l.useState)(!1),[E,L]=(0,l.useState)(!1),[O,T]=(0,l.useState)(!1),[U,$]=(0,l.useState)(!1),[M,Q]=(0,l.useState)(!1),[X,Y]=(0,l.useState)(!1),{toast:H}=(0,Z.pm)(),{data:I,isLoading:J,refetch:W}=(0,N.r0)(h,20,m),G=(0,N.TY)(),ee=(0,N.MK)(),es=(0,N.SV)(),en=(null==I?void 0:null===(e=I.pagination)||void 0===e?void 0:e.total)||0,et=(null==I?void 0:null===(s=I.contents)||void 0===s?void 0:s.filter(e=>"pending"===e.status).length)||0,el=(null==I?void 0:null===(n=I.contents)||void 0===n?void 0:n.filter(e=>"flagged"===e.status).length)||0,ea=(null==I?void 0:null===(a=I.contents)||void 0===a?void 0:a.filter(e=>"banned"===e.status).length)||0,ei=async()=>{if(p)try{await ee.mutateAsync({id:p._id,reason:z}),H({title:"Content Rejected",description:"The content has been rejected."}),L(!1),K(""),F(null),W()}catch(e){H({title:"Error",description:"Failed to reject content.",variant:"destructive"})}},ec=async()=>{if(p)try{await es.mutateAsync({id:p._id,reason:V}),H({title:"Content Banned",description:"The content has been banned."}),q(!1),R(""),F(null),W()}catch(e){H({title:"Error",description:"Failed to ban content.",variant:"destructive"})}},er=async()=>{if(p)try{H({title:"Content Deleted",description:"The content has been deleted."}),$(!1),F(null),W()}catch(e){H({title:"Error",description:"Failed to delete content.",variant:"destructive"})}},ed=g({onView:e=>{F(e),Q(!0)},onApprove:async e=>{try{await G.mutateAsync(e._id),H({title:"Content Approved",description:"The content has been approved successfully."}),W()}catch(e){H({title:"Error",description:"Failed to approve content.",variant:"destructive"})}},onReject:e=>{F(e),L(!0)},onFlag:e=>{F(e),T(!0)},onBan:e=>{F(e),q(!0)},onDelete:e=>{F(e),$(!0)},onPreview:e=>{F(e),Y(!0)}});return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Content Moderation"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage and moderate user-generated content"})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(r.z,{variant:"outline",onClick:()=>W(),children:"Refresh"})})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,t.jsx)(f.Zb,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Content"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:en})]}),(0,t.jsx)(y,{className:"h-8 w-8 text-muted-foreground"})]})}),(0,t.jsx)(f.Zb,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending Review"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:et})]}),(0,t.jsx)(j.Z,{className:"h-8 w-8 text-orange-600"})]})}),(0,t.jsx)(f.Zb,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Flagged"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-red-600",children:el})]}),(0,t.jsx)(o,{className:"h-8 w-8 text-red-600"})]})}),(0,t.jsx)(f.Zb,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Banned"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-600",children:ea})]}),(0,t.jsx)(w,{className:"h-8 w-8 text-gray-600"})]})})]}),(0,t.jsx)(f.Zb,{className:"p-4",children:(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsxs)(A.Ph,{value:m.status||"all",onValueChange:e=>v({...m,status:"all"===e?void 0:e}),children:[(0,t.jsx)(A.i4,{className:"w-[180px]",children:(0,t.jsx)(A.ki,{placeholder:"Filter by status"})}),(0,t.jsxs)(A.Bw,{children:[(0,t.jsx)(A.Ql,{value:"all",children:"All Status"}),(0,t.jsx)(A.Ql,{value:"pending",children:"Pending"}),(0,t.jsx)(A.Ql,{value:"active",children:"Active"}),(0,t.jsx)(A.Ql,{value:"flagged",children:"Flagged"}),(0,t.jsx)(A.Ql,{value:"banned",children:"Banned"})]})]})})}),(0,t.jsx)(f.Zb,{className:"p-6",children:(0,t.jsx)(C.w,{columns:ed,data:(null==I?void 0:I.contents)||[],searchKey:"caption"})}),(0,t.jsx)(b.Vq,{open:P,onOpenChange:q,children:(0,t.jsxs)(b.cZ,{children:[(0,t.jsxs)(b.fK,{children:[(0,t.jsx)(b.$N,{children:"Ban Content"}),(0,t.jsx)(b.Be,{children:"Are you sure you want to ban this content? This action will remove it from public view."})]}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(k._,{htmlFor:"reason",children:"Reason for banning"}),(0,t.jsx)(S.g,{id:"reason",placeholder:"Enter the reason for banning this content...",value:V,onChange:e=>R(e.target.value)})]})}),(0,t.jsxs)(b.cN,{children:[(0,t.jsx)(r.z,{variant:"outline",onClick:()=>q(!1),children:"Cancel"}),(0,t.jsx)(r.z,{variant:"destructive",onClick:ec,children:"Ban Content"})]})]})}),(0,t.jsx)(b.Vq,{open:E,onOpenChange:L,children:(0,t.jsxs)(b.cZ,{children:[(0,t.jsxs)(b.fK,{children:[(0,t.jsx)(b.$N,{children:"Reject Content"}),(0,t.jsx)(b.Be,{children:"Provide a reason for rejecting this content submission."})]}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(k._,{htmlFor:"reject-reason",children:"Rejection Reason"}),(0,t.jsx)(S.g,{id:"reject-reason",placeholder:"Enter the reason for rejection...",value:z,onChange:e=>K(e.target.value)})]})}),(0,t.jsxs)(b.cN,{children:[(0,t.jsx)(r.z,{variant:"outline",onClick:()=>L(!1),children:"Cancel"}),(0,t.jsx)(r.z,{variant:"destructive",onClick:ei,children:"Reject Content"})]})]})}),(0,t.jsx)(b.Vq,{open:O,onOpenChange:T,children:(0,t.jsxs)(b.cZ,{children:[(0,t.jsxs)(b.fK,{children:[(0,t.jsx)(b.$N,{children:"Flag Content"}),(0,t.jsx)(b.Be,{children:"Flag this content for further review."})]}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(k._,{htmlFor:"flag-reason",children:"Flag Reason"}),(0,t.jsx)(S.g,{id:"flag-reason",placeholder:"Enter the reason for flagging...",value:B,onChange:e=>D(e.target.value)})]})}),(0,t.jsxs)(b.cN,{children:[(0,t.jsx)(r.z,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),(0,t.jsx)(r.z,{onClick:()=>T(!1),children:"Flag Content"})]})]})}),(0,t.jsx)(b.Vq,{open:U,onOpenChange:$,children:(0,t.jsxs)(b.cZ,{children:[(0,t.jsxs)(b.fK,{children:[(0,t.jsx)(b.$N,{children:"Delete Content"}),(0,t.jsx)(b.Be,{children:"Are you sure you want to permanently delete this content? This action cannot be undone."})]}),(0,t.jsxs)(b.cN,{children:[(0,t.jsx)(r.z,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),(0,t.jsx)(r.z,{variant:"destructive",onClick:er,children:"Delete"})]})]})}),(0,t.jsx)(b.Vq,{open:X,onOpenChange:Y,children:(0,t.jsxs)(b.cZ,{className:"max-w-4xl",children:[(0,t.jsx)(b.fK,{children:(0,t.jsx)(b.$N,{children:"Video Preview"})}),(0,t.jsx)("div",{className:"aspect-video w-full bg-black",children:(null==p?void 0:p.videoUrl)?(0,t.jsx)("video",{src:p.videoUrl,controls:!0,className:"h-full w-full",children:"Your browser does not support the video tag."}):(0,t.jsx)("div",{className:"flex h-full items-center justify-center text-white",children:"No video available"})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Caption:"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:(null==p?void 0:p.caption)||"No caption"})]})]})}),(0,t.jsx)(b.Vq,{open:M,onOpenChange:Q,children:(0,t.jsxs)(b.cZ,{className:"max-w-3xl",children:[(0,t.jsx)(b.fK,{children:(0,t.jsx)(b.$N,{children:"Content Details"})}),(0,t.jsxs)(_.mQ,{defaultValue:"info",className:"w-full",children:[(0,t.jsxs)(_.dr,{children:[(0,t.jsx)(_.SP,{value:"info",children:"Information"}),(0,t.jsx)(_.SP,{value:"stats",children:"Statistics"}),(0,t.jsx)(_.SP,{value:"reports",children:"Reports"})]}),(0,t.jsx)(_.nU,{value:"info",className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(k._,{children:"Creator"}),(0,t.jsx)("p",{className:"text-sm",children:(null==p?void 0:null===(i=p.creator)||void 0===i?void 0:i.username)||"Unknown"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(k._,{children:"Caption"}),(0,t.jsx)("p",{className:"text-sm",children:(null==p?void 0:p.caption)||"No caption"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(k._,{children:"Status"}),(0,t.jsx)("p",{className:"text-sm capitalize",children:null==p?void 0:p.status})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(k._,{children:"Created"}),(0,t.jsx)("p",{className:"text-sm",children:(null==p?void 0:p.createdAt)?new Date(p.createdAt).toLocaleString():"N/A"})]})]})}),(0,t.jsx)(_.nU,{value:"stats",className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(k._,{children:"Views"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:(null==p?void 0:null===(c=p.views)||void 0===c?void 0:c.toLocaleString())||0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(k._,{children:"Likes"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:(null==p?void 0:null===(d=p.likes)||void 0===d?void 0:d.toLocaleString())||0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(k._,{children:"Comments"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:(null==p?void 0:null===(x=p.comments)||void 0===x?void 0:x.toLocaleString())||0})]})]})}),(0,t.jsxs)(_.nU,{value:"reports",className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(k._,{children:"Total Reports"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-red-600",children:(null==p?void 0:p.reports)||0})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Report details would appear here."})]})]})]})})]})}}},function(e){e.O(0,[137,825,594,705,305,985,333,722,971,117,744],function(){return e(e.s=82386)}),_N_E=e.O()}]);